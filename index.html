<!doctype html>
<html>
    <head>
        <link rel='stylesheet' type='text/css' href='style.css'>
        <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
        <meta name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi" />

    </head>
    <body>
        <div class='lotw-interactive-container'>
            <div class='lotw-interactive-image'>
                <img src='jason-demo.jpg'>
            </div>
            <div class='lotw-interactive-marker' data-ind='1' style='left: 29%; top: 46.5%;'></div>
            <div class='lotw-interactive-marker' data-ind='2' style='left: 70%; top: 64%;'></div>
            <div class='lotw-interactive-marker' data-ind='3' style='left: 76%; top: 39%;'></div>
            <div class='lotw-interactive-descript' data-ind='1'>
                <div class='lotw-interactive-close'>close</div>
                <img src='https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Yamaha_657_CSG_30.jpg/640px-Yamaha_657_CSG_30.jpg'>
                <p>The clarinet is a family of woodwind instruments. It has a single-reed mouthpiece, a straight, cylindrical tube with an almost cylindrical bore, and a flared bell. A person who plays a clarinet is called a clarinetist (sometimes spelled clarinettist). (Wikipedia)</p>
            </div>
            <div class='lotw-interactive-descript' data-ind='2'>
                <div class='lotw-interactive-close'>close</div>
                <p>The word clarinet may have entered the English language via the French clarinette (the feminine diminutive of Old French clarin or clarion), or from Proven√ßal clarin, "oboe".</p>
            </div>
            <div class='lotw-interactive-descript' data-ind='3'>
                <div class='lotw-interactive-close'>close</div>
                <p>Huang County, former county in Shandong, China, current Longkou City
                Yellow River, or Huang River, in China
                Huangshan, mountain range in Anhui, China
                Huang (state), state in ancient China.
                Hwang River, in Gyeongsangnam-do, South Korea</p>
            </div>
        </div>
        <script>
        $(document).ready(function(){
            $(".lotw-interactive-descript").hide();
            currentIndex = 0;
        });

        $(".lotw-interactive-marker").on('click', function(){
            $this = $(this);
            index = $this.attr('data-ind');
            console.log(index);
            if (index != currentIndex){
                currentIndex = index;
                justDisabled = false;
                $(".lotw-interactive-marker").removeClass("selected");
                $this.addClass("selected");
                markerTop = $this.css("top");
                markerLeft = parseInt($this.css("left"));
                selector = ".lotw-interactive-descript[data-ind='" + index + "']";
                newdescript = $(selector);
                thisWidth = newdescript.width();
                console.log(markerLeft, thisWidth);
                if (markerLeft - thisWidth / 2 < 0){
                    markerLeft = thisWidth / 2 + 16;
                }
                windowWidth = $(window).width();
                if (markerLeft + thisWidth / 2 > windowWidth){
                    markerLeft = windowWidth - thisWidth / 2 - 16;
                }
                $(".lotw-interactive-descript").hide();
                $(selector).show().css("top","calc(72px + " + markerTop + ")").css("left", markerLeft);
            }
        });

        $(".lotw-interactive-close").on('click', function(){
            console.log("test");
            thisdescript = $(this).parent();
            thisdescript.hide();
            index = $this.attr('data-ind');
            selector = ".lotw-interactive-marker[data-ind='" + index + "']";
            $(selector).removeClass('selected');
            currentIndex = 0;
        });
        </script>
    </body>
</html>